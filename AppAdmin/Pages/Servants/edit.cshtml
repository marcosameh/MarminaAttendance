@page "/servant/edit/{Id}"
@model App.UI.Pages.Servant.EditcshtmlModel
<style>
    #attendanceChart {
        width: 400px;
        height: 400px;
    }
</style>
<h2 class="text-center">Edit Servant</h2>
<hr />
<form>
    <div class="row ml-4">
        <div class="col-md-4">
            <div class="form-group">
                <label for="name">Name</label>
                <input type="text" class="form-control" id="name" name="name" value="@Model.Servant.Name">
            </div>
            <div class="form-group">
                <label for="phone">Phone</label>
                <input type="text" class="form-control" id="phone" name="phone" value="@Model.Servant.Phone">
            </div>
            <div class="form-group">
                <label for="address">Address</label>
                <input type="text" class="form-control" id="address" name="address" value="@Model.Servant.Address">
            </div>
            <div class="form-group">
                <label for="fatherOfConfession">Father of Confession</label>
                <input type="text" class="form-control" id="fatherOfConfession" name="fatherOfConfession" value="@Model.Servant.FatherOfConfession">
            </div>
            <div class="form-group">
                <label for="birthday">Birthday</label>
                <input type="date" class="form-control" id="birthday" name="birthday" value="@Model.Servant.Birthday?.ToString("yyyy-MM-dd")">
            </div>
            <div class="form-check form-check-flat form-check-primary">
                <label class="form-check-label">
                    <input type="checkbox" class="form-check-input"> Remember me <i class="input-helper"></i>
                </label>
            </div>
        </div>
        <div class="col-md-4">
            <div class="form-group">
                <label for="photo">Photo</label>
                <div class="card" style="width: 18rem;">
                    <img src="/photos/الخدام/@Model.Servant.Photo" class="card-img-top" alt="Current photo">
                </div>
                <div class="mt-3">
                    <input type="file" class="form-control-file" id="photo" name="photo">
                    <small class="form-text text-muted">Upload a new photo to replace the current one.</small>
                </div>
            </div>
        </div>


        <div class="col-md-2">
            <div class="form-group">

                @foreach (var week in Model.WeeksList)
                {
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="week-@week.Id" name="servantWeek" value="@week.Id" @(Model.Servant.ServantWeek.Any(sw => sw.WeekId == week.Id) ? "checked" : "")>
                        <label class="form-check-label" for="week-@week.Id">
                            @week.Name
                        </label>
                    </div>
                }

            </div>
        </div>
        <div class="col-md-2">
            <div class="form-group">
                @foreach (var week in Model.WeeksList)
                {
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="week-@week.Id" name="servantWeek" value="@week.Id" @(Model.Servant.ServantWeek.Any(sw => sw.WeekId == week.Id) ? "checked" : "")>
                        <label class="form-check-label" for="week-@week.Id">
                            @week.Name
                        </label>
                    </div>
                }

            </div>
        </div>
    </div>
    <br>
    <div class="d-flex justify-content-end mt-2 mr-2">
        <button type="submit" class="btn btn-primary">اضافة</button>
    </div>
</form>
<div class="row">
    <div class="col-md-12">
        <canvas id="attendanceChart" width="400" height="400"></canvas>
    </div>
</div>

@section Scripts{
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.0/dist/chart.min.js"></script>
    <script>
        var attendanceData = {
            labels: ['Attended', 'Missed'],
            datasets: [{
                data: [8, 2],
                backgroundColor: [
                    'rgba(54, 162, 235, 0.2)',
                    'rgba(255, 99, 132, 0.2)'
                ],
                borderColor: [
                    'rgba(54, 162, 235, 1)',
                    'rgba(255, 99, 132, 1)'
                ],
                borderWidth: 1
            }]
        };

        // Create the attendance chart
        var ctx = document.getElementById('attendanceChart').getContext('2d');
        var myPieChart = new Chart(ctx, {
            type: 'pie',
            data: attendanceData,
            options: {
                responsive: false,
                legend: {
                    position: 'bottom'
                }
            }
        });

    </script>
    }
